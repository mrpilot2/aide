CMAKE_MINIMUM_REQUIRED(VERSION 3.10)

PROJECT(aide LANGUAGES CXX VERSION 0.1.0)

OPTION(ENABLE_COVERAGE "Generate code coverage reports" OFF)

SET(CMAKE_CXX_STANDARD 14)
SET(CMAKE_CXX_EXTENSIONS OFF)
ADD_COMPILE_OPTIONS("$<$<CONFIG:Debug>:-Wall;-Wextra;-Wpedantic;-Werror>")
ADD_COMPILE_OPTIONS("$<$<AND:$<CXX_COMPILER_ID:Clang>,$<CONFIG:Debug>>:-Weverything;-Wno-c++98-compat>")
ADD_COMPILE_OPTIONS("$<$<AND:$<CXX_COMPILER_ID:GNU>,$<CONFIG:Debug>>:-Wno-unknown-pragmas>")

IF(WIN32)
  SET(CMAKE_ARCHIVE_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR})
  SET(CMAKE_LIBRARY_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR})
  SET(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR})
ENDIF()

ADD_SUBDIRECTORY(doc)
ADD_SUBDIRECTORY(src)
ADD_SUBDIRECTORY(demo)

ENABLE_TESTING()
ADD_SUBDIRECTORY(tests)